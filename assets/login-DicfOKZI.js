import{d as h,f as i,C as x,y,c as _,o as T,e as s,w as t,a4 as C,k as r,a0 as p,Z as I,aa as S,m as L,a as m,a6 as f,ag as M,a5 as B,B as R}from"./index-BZcBuK5J.js";import{a as j,b as E,c as F,d as P,_ as U}from"./auth-v1-tree-B6snAvnZ.js";import{u as N,a as q}from"./defaultStore-n0_7k54v.js";import{V as D,a as $}from"./VForm-zYshXq8X.js";import{a as Z,V as u}from"./VRow-DUdJgntK.js";import{V as g}from"./VTextField-CEL1U-y0.js";/* empty css              */import"./index-BBbmddg2.js";const z={class:"auth-wrapper d-flex align-center justify-center pa-4"},A={class:"d-flex align-center justify-space-between flex-wrap my-6"},ee=h({__name:"login",setup(G){const w=I(),l=N(),c=i(null),a=i({email:localStorage.getItem("email"),password:localStorage.getItem("password"),remember:!1,error:{email:null,password:null}}),V=x(),b=y(()=>V.global.name.value==="light"?j:E),n=i(!1);async function k(){var d;if(a.value.email&&a.value.password){a.value.remember==!0&&a.value.email&&a.value.password&&(localStorage.setItem("email",a.value.email),localStorage.setItem("password",a.value.password));try{const e=await q.post(l.apiUrl+"login",{email:a.value.email,password:a.value.password});console.log(e.data.token),l.authToken=e.data.token,l.username=e.data.user.name,localStorage.setItem("authToken",e.data.token),console.log(l.authToken),w.push("/dashboard"),console.log("Login success:",e.data)}catch(e){(d=c.value)==null||d.focus(),a.value.error.password=e.response?e.response.data.error:e.message,console.error("Login failed:",e.response?e.response.data:e.message)}}}return(d,e)=>{const v=L("RouterLink");return T(),_("div",z,[s(C,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[s(S,{class:"justify-center"},{default:t(()=>[s(v,{to:"/",class:"d-flex align-center gap-3"},{default:t(()=>e[4]||(e[4]=[m("div",{class:"d-flex"},null,-1),m("h2",{class:"font-weight-medium text-2xl text-uppercase"}," Demo Software ",-1)])),_:1})]),_:1}),s(f,{class:"pt-2"}),s(f,null,{default:t(()=>[s(D,{onSubmit:M(k,["prevent"])},{default:t(()=>[s(Z,null,{default:t(()=>[s(u,{cols:"12"},{default:t(()=>[s(g,{modelValue:r(a).email,"onUpdate:modelValue":e[0]||(e[0]=o=>r(a).email=o),ref_key:"emailInput",ref:c,error:!!r(a).error.email,"error-messages":r(a).error.email,rules:[o=>!!o||"Email is required",o=>/.+@.+\..+/.test(o)||"Email must be valid"],label:"Email",type:"email"},null,8,["modelValue","error","error-messages","rules"])]),_:1}),s(u,{cols:"12"},{default:t(()=>[s(g,{modelValue:r(a).password,"onUpdate:modelValue":e[1]||(e[1]=o=>r(a).password=o),error:!!r(a).error.password,"error-messages":r(a).error.password,label:"Password",rules:[o=>!!o||"Password is required",o=>o.length>=6||"Minimum 6 characters"],placeholder:"············",type:r(n)?"text":"password",autocomplete:"password","append-inner-icon":r(n)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":e[2]||(e[2]=o=>n.value=!r(n))},null,8,["modelValue","error","error-messages","rules","type","append-inner-icon"]),m("div",A,[s($,{modelValue:r(a).remember,"onUpdate:modelValue":e[3]||(e[3]=o=>r(a).remember=o),label:"Remember me"},null,8,["modelValue"]),e[5]||(e[5]=m("a",{class:"text-primary",href:"javascript:void(0)"}," Forgot Password? ",-1))]),s(B,{block:"",type:"submit"},{default:t(()=>e[6]||(e[6]=[R(" Login ")])),_:1})]),_:1}),s(u,{cols:"12",class:"text-center text-base"}),s(u,{cols:"12",class:"text-center"},{default:t(()=>[s(U)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(p,{class:"auth-footer-start-tree d-none d-md-block",src:r(F),width:250},null,8,["src"]),s(p,{src:r(P),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),s(p,{class:"auth-footer-mask d-none d-md-block",src:r(b)},null,8,["src"])])}}});export{ee as default};
